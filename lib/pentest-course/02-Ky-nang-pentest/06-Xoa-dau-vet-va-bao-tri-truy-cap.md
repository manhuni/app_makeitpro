DÆ°á»›i Ä‘Ã¢y lÃ  ná»™i dung chi tiáº¿t cho bÃ i há»c:

---

# 06. XÃ³a dáº¥u váº¿t vÃ  Báº£o trÃ¬ truy cáº­p

**Persistence & Covering Tracks**

## ğŸ¯ Má»¥c tiÃªu

* Hiá»ƒu táº§m quan trá»ng cá»§a viá»‡c duy trÃ¬ truy cáº­p vÃ o há»‡ thá»‘ng sau khi khai thÃ¡c thÃ nh cÃ´ng.
* Biáº¿t cÃ¡ch che giáº¥u hoáº¡t Ä‘á»™ng Ä‘á»ƒ trÃ¡nh bá»‹ phÃ¡t hiá»‡n.
* Nháº­n thá»©c rÃµ cÃ¡c hÃ nh vi cÃ³ thá»ƒ **vi pháº¡m phÃ¡p luáº­t** náº¿u khÃ´ng Ä‘Æ°á»£c cáº¥p quyá»n há»£p phÃ¡p.

> A skilled attacker doesnâ€™t just break in â€” they stay in, silently. But a professional pentester knows when to stop, and always logs responsibly.

---

## ğŸ” 1. Duy trÃ¬ truy cáº­p (Persistence)

Duy trÃ¬ truy cáº­p lÃ  quÃ¡ trÃ¬nh thiáº¿t láº­p cÆ¡ cháº¿ Ä‘á»ƒ cÃ³ thá»ƒ **quay láº¡i há»‡ thá»‘ng** mÃ  **khÃ´ng cáº§n khai thÃ¡c láº¡i tá»« Ä‘áº§u**.

### ğŸ“Œ Má»¥c tiÃªu:

* Táº¡o cá»­a háº­u (backdoor)
* Thiáº¿t láº­p ngÆ°á»i dÃ¹ng/Ä‘á»‹nh cáº¥u hÃ¬nh cho truy cáº­p lÃ¢u dÃ i
* Äáº·t cronjob/scheduler Ä‘á»ƒ tá»± Ä‘á»™ng kÃ­ch hoáº¡t shell

### ğŸ”§ Ká»¹ thuáº­t phá»• biáº¿n:

#### TrÃªn Linux:

| PhÆ°Æ¡ng phÃ¡p           | MÃ´ táº£                                 |
| --------------------- | ------------------------------------- |
| SSH key injection     | ThÃªm key vÃ o `~/.ssh/authorized_keys` |
| Cron job backdoor     | Táº¡o job gá»i reverse shell             |
| Alias hoáº·c \~/.bashrc | Tá»± Ä‘á»™ng gá»i shell khi user login      |
| Setuid shell          | Táº¡o file cÃ³ quyá»n root                |

#### TrÃªn Windows:

| PhÆ°Æ¡ng phÃ¡p              | MÃ´ táº£                               |
| ------------------------ | ----------------------------------- |
| Registry autorun key     | Shell cháº¡y khi khá»Ÿi Ä‘á»™ng            |
| Scheduled tasks          | Thiáº¿t láº­p tÃ¡c vá»¥ cháº¡y shell Ä‘á»‹nh ká»³ |
| Service hijacking        | Gáº¯n shell vÃ o dá»‹ch vá»¥ há»‡ thá»‘ng      |
| Add user vÃ o group admin | Táº¡o user má»›i cÃ³ quyá»n quáº£n trá»‹      |

---

## ğŸ§½ 2. XÃ³a dáº¥u váº¿t (Covering Tracks)

XÃ³a dáº¥u váº¿t lÃ  hÃ nh Ä‘á»™ng lÃ m **áº©n sá»± hiá»‡n diá»‡n** cá»§a báº¡n trong há»‡ thá»‘ng sau khi Ä‘Ã£ táº¥n cÃ´ng.

> Trong kiá»ƒm thá»­ báº£o máº­t (pentest há»£p phÃ¡p), xÃ³a dáº¥u váº¿t chá»‰ Ä‘Æ°á»£c thá»±c hiá»‡n **cÃ³ kiá»ƒm soÃ¡t** Ä‘á»ƒ trÃ¡nh áº£nh hÆ°á»Ÿng Ä‘áº¿n há»‡ thá»‘ng tháº­t.

### ğŸ§¹ HÃ nh Ä‘á»™ng thÆ°á»ng tháº¥y:

| HÃ nh Ä‘á»™ng                | CÃ´ng cá»¥ / MÃ´ táº£                     |
| ------------------------ | ----------------------------------- |
| XÃ³a log há»‡ thá»‘ng (Linux) | `echo "" > /var/log/*` (nguy hiá»ƒm!) |
| XÃ³a log event (Windows)  | `wevtutil cl <logname>`             |
| Gá»¡ shell, tá»‡p, user giáº£  | `rm`, xÃ³a registry, user del        |
| Sá»­ dá»¥ng rootkit/trojans  | (KhÃ´ng khuyáº¿n khÃ­ch trong pentest!) |

---

## âš ï¸ LÆ°u Ã½ Ä‘áº¡o Ä‘á»©c vÃ  phÃ¡p lÃ½

* KhÃ´ng bao giá» duy trÃ¬ truy cáº­p hoáº·c xÃ³a log trÃªn há»‡ thá»‘ng thá»±c **khi khÃ´ng Ä‘Æ°á»£c phÃ©p**.
* LuÃ´n xin phÃ©p rÃµ rÃ ng náº¿u cÃ³ Ã½ Ä‘á»‹nh kiá»ƒm tra kháº£ nÄƒng persistence.
* Ghi láº¡i má»i thay Ä‘á»•i báº¡n Ä‘Ã£ thá»±c hiá»‡n trong bÃ¡o cÃ¡o Ä‘á»ƒ khÃ¡ch hÃ ng cÃ³ thá»ƒ kiá»ƒm tra, kháº¯c phá»¥c.

---

## ğŸ§  Tá»•ng káº¿t

* **Persistence** giÃºp Ä‘áº£m báº£o báº¡n cÃ³ thá»ƒ tiáº¿p tá»¥c kiá»ƒm tra sau khi máº¥t káº¿t ná»‘i.
* **Covering tracks** chá»‰ nÃªn dÃ¹ng Ä‘á»ƒ kiá»ƒm tra Ä‘á»™ phÃ¡t hiá»‡n cá»§a há»‡ thá»‘ng giÃ¡m sÃ¡t (SIEM, IDS/IPS).
* Má»™t pentester chuyÃªn nghiá»‡p **luÃ´n biáº¿t khi nÃ o nÃªn dá»«ng láº¡i**.

---

Báº¡n cÃ³ muá»‘n mÃ¬nh viáº¿t tiáº¿p bÃ i **07. BÃ¡o cÃ¡o vÃ  Äá» xuáº¥t (Reporting & Recommendations)** khÃ´ng?
