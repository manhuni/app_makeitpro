Dưới đây là nội dung chi tiết cho bài học:

---

# 03. Scanning & Enumeration / Quét và liệt kê dịch vụ

## 🎯 Mục tiêu

* Hiểu rõ bước Scanning & Enumeration trong quy trình pentest.
* Sử dụng các công cụ để phát hiện cổng, dịch vụ, và thông tin hệ thống.
* Phân tích dữ liệu thu được để chuẩn bị cho bước khai thác (Exploitation).

> Scanning and enumeration involve identifying live hosts, open ports, services, and extracting detailed system information – all crucial for crafting your attack.

---

## 🔍 1. Scanning – Quét hệ thống

Scanning là quá trình phát hiện các **host đang hoạt động**, **port mở**, **dịch vụ đang chạy** trên hệ thống mục tiêu.

### 🛠 Các kỹ thuật quét phổ biến

| Phương pháp quét  | Mô tả                      | Công cụ    |
| ----------------- | -------------------------- | ---------- |
| TCP SYN scan      | Quét nửa kết nối (stealth) | `nmap -sS` |
| TCP connect scan  | Quét đầy đủ kết nối TCP    | `nmap -sT` |
| UDP scan          | Tìm dịch vụ UDP            | `nmap -sU` |
| Port scan toàn bộ | Quét tất cả cổng           | `nmap -p-` |
| OS detection      | Xác định hệ điều hành      | `nmap -O`  |
| Version detection | Xác định phiên bản dịch vụ | `nmap -sV` |

---

### 🧪 Ví dụ quét với Nmap

```bash
nmap -sS -sV -T4 -p- -v 192.168.1.1
```

* `-sS`: TCP SYN scan
* `-sV`: xác định phiên bản dịch vụ
* `-T4`: tốc độ quét nhanh hơn
* `-p-`: quét tất cả 65535 cổng

---

## 🧾 2. Enumeration – Liệt kê thông tin

Sau khi biết dịch vụ, enumeration giúp khai thác **chi tiết nội dung dịch vụ**, như tài khoản, thư mục chia sẻ, banners,...

### Các mục tiêu phổ biến

| Giao thức | Mục tiêu Enumeration            | Công cụ                             |
| --------- | ------------------------------- | ----------------------------------- |
| SMB       | Chia sẻ thư mục, user, version  | `enum4linux`, `smbclient`, `smbmap` |
| FTP       | Anonymous login, file listing   | `ftp`, `nmap --script ftp-anon`     |
| SSH       | Banner, user bruteforce         | `hydra`, `ncrack`                   |
| SNMP      | System info, user, service list | `snmpwalk`, `onesixtyone`           |
| NetBIOS   | Hostname, domain, shares        | `nbtscan`, `nmap`                   |
| HTTP      | Thư mục, máy chủ, CMS           | `dirb`, `gobuster`, `whatweb`       |

---

### 🧪 Ví dụ Enumeration SMB

```bash
enum4linux -a 192.168.1.10
smbclient -L //192.168.1.10/ -N
```

---

## 🧠 Tổng kết

* Scanning cho bạn **bản đồ hệ thống**: có gì đang mở, chạy gì?
* Enumeration giúp **đào sâu thông tin**, từ đó tìm điểm khai thác.
* Sự thành công của giai đoạn này ảnh hưởng lớn đến các bước tấn công sau.

---

## ✅ Gợi ý thực hành

1. Dùng `nmap` quét một máy ảo trong lab (Kali + Metasploitable).
2. Dùng `enum4linux` hoặc `smbmap` để tìm tài nguyên chia sẻ.
3. Quét web bằng `whatweb`, `dirb` để tìm cấu trúc thư mục.

---

Bạn muốn mình viết tiếp bài **04. Vulnerability Analysis** không, hay muốn tạo bài lab thực hành quét và enum cụ thể?
